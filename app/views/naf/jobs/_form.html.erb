<%= form_for(@job) do |f| %>
  
  <% if @job.errors.any? %>
  <div id="errorExplanation">
    <h2><%= pluralize(@job.errors.count, "error") %> prohibited this application from being saved:</h2>
  </div>
  <% end %>
  <div class="field">
    <%= f.label :application_type_id, "Script type*" %> <br />
    <%= f.select(:application_type_id, Naf::ApplicationType.all.collect{ |type| [type.script_type_name, type.id]}, {:include_blank => true}) %>
  </div>

  <div class="field">
    <%= f.label :command, "Command*" %> <br />
    <%= f.text_area :command, :rows => 4, :cols => 60 %>
  </div>

  <div class="field">
    <%= f.label :application_run_group_restriction_id, "Application run group restriction*" %></br />
    <%= f.select(:application_run_group_restriction_id, ::Naf::ApplicationRunGroupRestriction.all.map{ |a| [a.application_run_group_restriction_name, a.id]}, {:include_blank => true} )%>
  </div>

  <div class="field">
    <%= f.label :application_run_group_name %><br />
    <%= select_tag(:run_group_name_type, options_for_select([["command", "command"], ["not set", "not set"], ["custom", "custom"]], @run_group_name_type)) %><br/>
    <%= f.text_area :application_run_group_name, :rows => 4, :cols => 32, :placeholder => "Please input Application Run Group Name" %>
  </div>

  <div class="field">
    <%= f.label :log_level %> <br />
    <%= f.text_field :log_level %>
  </div>

  <div class="field">
    <%= f.label :application_run_group_limit %>  <br />
    <%= f.text_field :application_run_group_limit %>
  </div>

  <div class="field">
    <%= f.label :request_to_terminate %> <br />
    <%= f.check_box :request_to_terminate %>
  </div>

  <br />
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<% content_for :javascripts do %>
    <script type='text/javascript'>
        jQuery(document).ready(function() {
            var run_group = jQuery("#job_application_run_group_name");

            if(jQuery("#run_group_name_type").val() != 'custom') {
                run_group.hide();
                run_group.val(null);
            }

            jQuery("#run_group_name_type").change(function () {
                var type = jQuery("#run_group_name_type").val();
                if(type == 'command') {
                    run_group.hide();
                    run_group.val(null);
                } else if(type == 'not set') {
                    run_group.hide();
                    run_group.val(null);
                } else {
                    run_group.slideToggle("slow");
                }
            });
        });
    </script>
<% end %>